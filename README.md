# Third-Party Modules - Dynamic Multi-Team Repository

Zero-configuration, multi-team module development for Scalestack platform.

## ğŸš€ Quick Start

```bash
# 1. Initial setup (first time only)
./setup.sh

# 2. Create your team directory
mkdir modules_yourteam/

# 3. Add your first module
mkdir modules_yourteam/my_module/
touch modules_yourteam/my_module/index.py

# 4. Push and create PR
git add .
git commit -m "[YourTeam] Add my_module"
git push origin feature/yourteam/my_module
```

**That's it!** The CDK automatically detects your team, creates a dedicated stack, and deploys your modules.

## ğŸ—ï¸ How It Works

1. **Create** a directory with pattern `modules_<teamname>/`
2. **Add** modules with `index.py` files
3. **Push** your changes and create a PR
4. **Auto-deploy** to `Team<TeamName>Stack-<stage>` CloudFormation stack

No CDK configuration needed - ever!

## ğŸ“ Repository Structure

```
third-party-modules/
â”œâ”€â”€ modules_<teamname>/          # Your team directory (auto-detected)
â”‚   â””â”€â”€ <module_name>/          # Your module
â”‚       â”œâ”€â”€ index.py            # Module code (REQUIRED)
â”‚       â””â”€â”€ requirements.txt    # Auto-generated by GitHub Actions
â”œâ”€â”€ cdk_dynamic_stacks.py       # Dynamic CDK (don't edit)
â”œâ”€â”€ cdk.json                    # CDK config (don't edit)
â”œâ”€â”€ pyproject.toml              # Shared dependencies
â””â”€â”€ DeveloperGuide.md          # Detailed development guide
```

## ğŸ·ï¸ Naming Conventions

| Resource | Format | Example |
|----------|--------|---------|
| Team Directory | `modules_<lowercase>/` | `modules_payments/` |
| Stack Name | `Team<PascalCase>Stack-<stage>` | `TeamPaymentsStack-newstg` |
| Lambda Name | `modules-<team>-<stage>-<module>` | `modules-payments-newstg-stripe` |

## ğŸ‘¥ Team Best Practices

### Module Organization
```
modules_yourteam/
â”œâ”€â”€ README.md              # Team documentation
â”œâ”€â”€ shared/                # Shared team utilities
â”‚   â””â”€â”€ utils.py
â”œâ”€â”€ module_one/
â”‚   â”œâ”€â”€ index.py
â”‚   â””â”€â”€ test.py
â””â”€â”€ module_two/
    â””â”€â”€ index.py
```

### Branch Naming
```bash
feature/teamname/module-name
fix/teamname/bug-description
```

### PR Titles
```
[TeamName] Add payment processing module
[TeamName] Fix timeout issue in analytics
```

## ğŸ” Finding Your Resources

After deployment:
- **CloudFormation**: `Team<YourTeam>Stack-newstg`
- **Lambda Functions**: Filter by `modules-<yourteam>-`
- **CloudWatch Logs**: `/aws/lambda/modules-<yourteam>-*`

## ğŸ“Š Multiple Teams Example

```
modules_payments/           # Auto-deploys to TeamPaymentsStack-newstg
â”œâ”€â”€ stripe_integration/
â””â”€â”€ paypal_processor/

modules_analytics/          # Auto-deploys to TeamAnalyticsStack-newstg
â”œâ”€â”€ user_metrics/
â””â”€â”€ revenue_dashboard/

modules_ml/                # Auto-deploys to TeamMlStack-newstg
â”œâ”€â”€ recommendation_engine/
â””â”€â”€ fraud_detector/
```

Each team deploys independently with zero coordination!

## ğŸ”‘ Key Benefits

- **Zero Configuration** - Just create directories and go
- **No Merge Conflicts** - Teams never edit shared files
- **Parallel Development** - All teams deploy simultaneously
- **Cost Tracking** - AWS costs allocated per team stack
- **Infinite Scalability** - Add unlimited teams

## ğŸ“š Documentation

- [DeveloperGuide.md](./DeveloperGuide.md) - Complete module development guide
- [.github/SECRETS_REQUIRED.md](./.github/SECRETS_REQUIRED.md) - GitHub secrets setup

## ğŸš¦ GitHub Actions

PRs automatically trigger:
1. Team directory detection
2. Module discovery in each team
3. Parallel stack deployments
4. Success/failure PR comments

## âš™ï¸ Requirements

- Python 3.12+
- Poetry
- AWS CDK
- Docker (for Lambda bundling)

---

**Ready to start?** Run `./setup.sh` and create your team directory!